import*as e from"react";var n,t={exports:{}},r={exports:{}},o={};var i,s,a,c,u,l,f,p,d,h,y,v,m,b,g={};
/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function S(){return s||(s=1,"production"===process.env.NODE_ENV?r.exports=function(){if(n)return o;n=1;var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,c=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,p=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,y=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;function E(e){if("object"==typeof e&&null!==e){var n=e.$$typeof;switch(n){case t:switch(e=e.type){case l:case f:case i:case a:case s:case d:return e;default:switch(e=e&&e.$$typeof){case u:case p:case v:case y:case c:return e;default:return n}}case r:return n}}}function C(e){return E(e)===f}return o.AsyncMode=l,o.ConcurrentMode=f,o.ContextConsumer=u,o.ContextProvider=c,o.Element=t,o.ForwardRef=p,o.Fragment=i,o.Lazy=v,o.Memo=y,o.Portal=r,o.Profiler=a,o.StrictMode=s,o.Suspense=d,o.isAsyncMode=function(e){return C(e)||E(e)===l},o.isConcurrentMode=C,o.isContextConsumer=function(e){return E(e)===u},o.isContextProvider=function(e){return E(e)===c},o.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},o.isForwardRef=function(e){return E(e)===p},o.isFragment=function(e){return E(e)===i},o.isLazy=function(e){return E(e)===v},o.isMemo=function(e){return E(e)===y},o.isPortal=function(e){return E(e)===r},o.isProfiler=function(e){return E(e)===a},o.isStrictMode=function(e){return E(e)===s},o.isSuspense=function(e){return E(e)===d},o.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===f||e===a||e===s||e===d||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===y||e.$$typeof===c||e.$$typeof===u||e.$$typeof===p||e.$$typeof===b||e.$$typeof===g||e.$$typeof===S||e.$$typeof===m)},o.typeOf=E,o}():r.exports=(i||(i=1,"production"!==process.env.NODE_ENV&&function(){var e="function"==typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,t=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,l=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,d=e?Symbol.for("react.memo"):60115,h=e?Symbol.for("react.lazy"):60116,y=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,m=e?Symbol.for("react.responder"):60118,b=e?Symbol.for("react.scope"):60119;function S(e){if("object"==typeof e&&null!==e){var p=e.$$typeof;switch(p){case n:var y=e.type;switch(y){case c:case u:case r:case i:case o:case f:return y;default:var v=y&&y.$$typeof;switch(v){case a:case l:case h:case d:case s:return v;default:return p}}case t:return p}}}var E=c,C=u,w=a,O=s,k=n,I=l,x=r,T=h,j=d,P=t,$=i,N=o,R=f,D=!1;function _(e){return S(e)===u}g.AsyncMode=E,g.ConcurrentMode=C,g.ContextConsumer=w,g.ContextProvider=O,g.Element=k,g.ForwardRef=I,g.Fragment=x,g.Lazy=T,g.Memo=j,g.Portal=P,g.Profiler=$,g.StrictMode=N,g.Suspense=R,g.isAsyncMode=function(e){return D||(D=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),_(e)||S(e)===c},g.isConcurrentMode=_,g.isContextConsumer=function(e){return S(e)===a},g.isContextProvider=function(e){return S(e)===s},g.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},g.isForwardRef=function(e){return S(e)===l},g.isFragment=function(e){return S(e)===r},g.isLazy=function(e){return S(e)===h},g.isMemo=function(e){return S(e)===d},g.isPortal=function(e){return S(e)===t},g.isProfiler=function(e){return S(e)===i},g.isStrictMode=function(e){return S(e)===o},g.isSuspense=function(e){return S(e)===f},g.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===u||e===i||e===o||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===d||e.$$typeof===s||e.$$typeof===a||e.$$typeof===l||e.$$typeof===v||e.$$typeof===m||e.$$typeof===b||e.$$typeof===y)},g.typeOf=S}()),g)),r.exports}
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/function E(){if(c)return a;c=1;var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;return a=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(n).map((function(e){return n[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(r,o){for(var i,s,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(r),c=1;c<arguments.length;c++){for(var u in i=Object(arguments[c]))n.call(i,u)&&(a[u]=i[u]);if(e){s=e(i);for(var l=0;l<s.length;l++)t.call(i,s[l])&&(a[s[l]]=i[s[l]])}}return a},a}function C(){if(l)return u;l=1;return u="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}function w(){return p?f:(p=1,f=Function.call.bind(Object.prototype.hasOwnProperty))}if("production"!==process.env.NODE_ENV){var O=S();t.exports=function(){if(v)return y;v=1;var e=S(),n=E(),t=C(),r=w(),o=function(){if(h)return d;h=1;var e=function(){};if("production"!==process.env.NODE_ENV){var n=C(),t={},r=w();e=function(e){var n="Warning: "+e;"undefined"!=typeof console&&console.error(n);try{throw new Error(n)}catch(e){}}}function o(o,i,s,a,c){if("production"!==process.env.NODE_ENV)for(var u in o)if(r(o,u)){var l;try{if("function"!=typeof o[u]){var f=Error((a||"React class")+": "+s+" type `"+u+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof o[u]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw f.name="Invariant Violation",f}l=o[u](i,u,a,s,null,n)}catch(e){l=e}if(!l||l instanceof Error||e((a||"React class")+": type specification of "+s+" `"+u+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof l+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),l instanceof Error&&!(l.message in t)){t[l.message]=!0;var p=c?c():"";e("Failed "+s+" type: "+l.message+(null!=p?p:""))}}}return o.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(t={})},d=o}(),i=function(){};function s(){return null}return"production"!==process.env.NODE_ENV&&(i=function(e){var n="Warning: "+e;"undefined"!=typeof console&&console.error(n);try{throw new Error(n)}catch(e){}}),y=function(a,c){var u="function"==typeof Symbol&&Symbol.iterator,l="@@iterator",f="<<anonymous>>",p={array:v("array"),bigint:v("bigint"),bool:v("boolean"),func:v("function"),number:v("number"),object:v("object"),string:v("string"),symbol:v("symbol"),any:y(s),arrayOf:function(e){return y((function(n,r,o,i,s){if("function"!=typeof e)return new h("Property `"+s+"` of component `"+o+"` has invalid PropType notation inside arrayOf.");var a=n[r];if(!Array.isArray(a))return new h("Invalid "+i+" `"+s+"` of type `"+g(a)+"` supplied to `"+o+"`, expected an array.");for(var c=0;c<a.length;c++){var u=e(a,c,o,i,s+"["+c+"]",t);if(u instanceof Error)return u}return null}))},element:y((function(e,n,t,r,o){var i=e[n];return a(i)?null:new h("Invalid "+r+" `"+o+"` of type `"+g(i)+"` supplied to `"+t+"`, expected a single ReactElement.")})),elementType:y((function(n,t,r,o,i){var s=n[t];return e.isValidElementType(s)?null:new h("Invalid "+o+" `"+i+"` of type `"+g(s)+"` supplied to `"+r+"`, expected a single ReactElement type.")})),instanceOf:function(e){return y((function(n,t,r,o,i){if(!(n[t]instanceof e)){var s=e.name||f;return new h("Invalid "+o+" `"+i+"` of type `"+((a=n[t]).constructor&&a.constructor.name?a.constructor.name:f)+"` supplied to `"+r+"`, expected instance of `"+s+"`.")}var a;return null}))},node:y((function(e,n,t,r,o){return b(e[n])?null:new h("Invalid "+r+" `"+o+"` supplied to `"+t+"`, expected a ReactNode.")})),objectOf:function(e){return y((function(n,o,i,s,a){if("function"!=typeof e)return new h("Property `"+a+"` of component `"+i+"` has invalid PropType notation inside objectOf.");var c=n[o],u=g(c);if("object"!==u)return new h("Invalid "+s+" `"+a+"` of type `"+u+"` supplied to `"+i+"`, expected an object.");for(var l in c)if(r(c,l)){var f=e(c,l,i,s,a+"."+l,t);if(f instanceof Error)return f}return null}))},oneOf:function(e){return Array.isArray(e)?y((function(n,t,r,o,i){for(var s=n[t],a=0;a<e.length;a++)if(d(s,e[a]))return null;var c=JSON.stringify(e,(function(e,n){return"symbol"===S(n)?String(n):n}));return new h("Invalid "+o+" `"+i+"` of value `"+String(s)+"` supplied to `"+r+"`, expected one of "+c+".")})):("production"!==process.env.NODE_ENV&&i(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),s)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&i("Invalid argument supplied to oneOfType, expected an instance of array."),s;for(var n=0;n<e.length;n++){var o=e[n];if("function"!=typeof o)return i("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+E(o)+" at index "+n+"."),s}return y((function(n,o,i,s,a){for(var c=[],u=0;u<e.length;u++){var l=(0,e[u])(n,o,i,s,a,t);if(null==l)return null;l.data&&r(l.data,"expectedType")&&c.push(l.data.expectedType)}return new h("Invalid "+s+" `"+a+"` supplied to `"+i+"`"+(c.length>0?", expected one of type ["+c.join(", ")+"]":"")+".")}))},shape:function(e){return y((function(n,r,o,i,s){var a=n[r],c=g(a);if("object"!==c)return new h("Invalid "+i+" `"+s+"` of type `"+c+"` supplied to `"+o+"`, expected `object`.");for(var u in e){var l=e[u];if("function"!=typeof l)return m(o,i,s,u,S(l));var f=l(a,u,o,i,s+"."+u,t);if(f)return f}return null}))},exact:function(e){return y((function(o,i,s,a,c){var u=o[i],l=g(u);if("object"!==l)return new h("Invalid "+a+" `"+c+"` of type `"+l+"` supplied to `"+s+"`, expected `object`.");var f=n({},o[i],e);for(var p in f){var d=e[p];if(r(e,p)&&"function"!=typeof d)return m(s,a,c,p,S(d));if(!d)return new h("Invalid "+a+" `"+c+"` key `"+p+"` supplied to `"+s+"`.\nBad object: "+JSON.stringify(o[i],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var y=d(u,p,s,a,c+"."+p,t);if(y)return y}return null}))}};function d(e,n){return e===n?0!==e||1/e==1/n:e!=e&&n!=n}function h(e,n){this.message=e,this.data=n&&"object"==typeof n?n:{},this.stack=""}function y(e){if("production"!==process.env.NODE_ENV)var n={},r=0;function o(o,s,a,u,l,p,d){if(u=u||f,p=p||a,d!==t){if(c){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var v=u+":"+a;!n[v]&&r<3&&(i("You are manually calling a React.PropTypes validation function for the `"+p+"` prop on `"+u+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[v]=!0,r++)}}return null==s[a]?o?null===s[a]?new h("The "+l+" `"+p+"` is marked as required in `"+u+"`, but its value is `null`."):new h("The "+l+" `"+p+"` is marked as required in `"+u+"`, but its value is `undefined`."):null:e(s,a,u,l,p)}var s=o.bind(null,!1);return s.isRequired=o.bind(null,!0),s}function v(e){return y((function(n,t,r,o,i,s){var a=n[t];return g(a)!==e?new h("Invalid "+o+" `"+i+"` of type `"+S(a)+"` supplied to `"+r+"`, expected `"+e+"`.",{expectedType:e}):null}))}function m(e,n,t,r,o){return new h((e||"React class")+": "+n+" type `"+t+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+o+"`.")}function b(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(b);if(null===e||a(e))return!0;var n=function(e){var n=e&&(u&&e[u]||e[l]);if("function"==typeof n)return n}(e);if(!n)return!1;var t,r=n.call(e);if(n!==e.entries){for(;!(t=r.next()).done;)if(!b(t.value))return!1}else for(;!(t=r.next()).done;){var o=t.value;if(o&&!b(o[1]))return!1}return!0;default:return!1}}function g(e){var n=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,n){return"symbol"===e||!!n&&("Symbol"===n["@@toStringTag"]||"function"==typeof Symbol&&n instanceof Symbol)}(n,e)?"symbol":n}function S(e){if(null==e)return""+e;var n=g(e);if("object"===n){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return n}function E(e){var n=S(e);switch(n){case"array":case"object":return"an "+n;case"boolean":case"date":case"regexp":return"a "+n;default:return n}}return h.prototype=Error.prototype,p.checkPropTypes=o,p.resetWarningCache=o.resetWarningCache,p.PropTypes=p,p},y}()(O.isElement,!0)}else t.exports=function(){if(b)return m;b=1;var e=C();function n(){}function t(){}return t.resetWarningCache=n,m=function(){function r(n,t,r,o,i,s){if(s!==e){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function o(){return r}r.isRequired=r;var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:n};return i.PropTypes=i,i}}()();var k=t.exports;const I={onActivate:k.func,onAddUndo:k.func,onBeforeAddUndo:k.func,onBeforeExecCommand:k.func,onBeforeGetContent:k.func,onBeforeRenderUI:k.func,onBeforeSetContent:k.func,onBeforePaste:k.func,onBlur:k.func,onChange:k.func,onClearUndos:k.func,onClick:k.func,onContextMenu:k.func,onCommentChange:k.func,onCompositionEnd:k.func,onCompositionStart:k.func,onCompositionUpdate:k.func,onCopy:k.func,onCut:k.func,onDblclick:k.func,onDeactivate:k.func,onDirty:k.func,onDrag:k.func,onDragDrop:k.func,onDragEnd:k.func,onDragGesture:k.func,onDragOver:k.func,onDrop:k.func,onExecCommand:k.func,onFocus:k.func,onFocusIn:k.func,onFocusOut:k.func,onGetContent:k.func,onHide:k.func,onInit:k.func,onInput:k.func,onKeyDown:k.func,onKeyPress:k.func,onKeyUp:k.func,onLoadContent:k.func,onMouseDown:k.func,onMouseEnter:k.func,onMouseLeave:k.func,onMouseMove:k.func,onMouseOut:k.func,onMouseOver:k.func,onMouseUp:k.func,onNodeChange:k.func,onObjectResizeStart:k.func,onObjectResized:k.func,onObjectSelected:k.func,onPaste:k.func,onPostProcess:k.func,onPostRender:k.func,onPreProcess:k.func,onProgressState:k.func,onRedo:k.func,onRemove:k.func,onReset:k.func,onSaveContent:k.func,onSelectionChange:k.func,onSetAttrib:k.func,onSetContent:k.func,onShow:k.func,onSubmit:k.func,onUndo:k.func,onVisualAid:k.func,onSkinLoadError:k.func,onThemeLoadError:k.func,onModelLoadError:k.func,onPluginLoadError:k.func,onIconsLoadError:k.func,onLanguageLoadError:k.func,onScriptsLoad:k.func,onScriptsLoadError:k.func},x=Object.assign({apiKey:k.string,id:k.string,inline:k.bool,init:k.object,initialValue:k.string,onEditorChange:k.func,value:k.string,tagName:k.string,tabIndex:k.number,cloudChannel:k.string,plugins:k.oneOfType([k.string,k.array]),toolbar:k.oneOfType([k.string,k.array]),disabled:k.bool,textareaName:k.string,tinymceScriptSrc:k.oneOfType([k.string,k.arrayOf(k.string),k.arrayOf(k.shape({src:k.string,async:k.bool,defer:k.bool}))]),rollback:k.oneOfType([k.number,k.oneOf([!1])]),scriptLoading:k.shape({async:k.bool,defer:k.bool,delay:k.number})},I),T=e=>"function"==typeof e,j=e=>e in I,P=e=>e.substr(2),$=(e,n,t,r,o)=>((e,n,t,r,o,i,s)=>{const a=Object.keys(o).filter(j),c=Object.keys(i).filter(j),u=a.filter((e=>void 0===i[e])),l=c.filter((e=>void 0===o[e]));u.forEach((e=>{const n=P(e),r=s[n];t(n,r),delete s[n]})),l.forEach((t=>{const o=r(e,t),i=P(t);s[i]=o,n(i,o)}))})(o,e.on.bind(e),e.off.bind(e),((n,t)=>r=>{var o;return null===(o=n(t))||void 0===o?void 0:o(r,e)}),n,t,r);let N=0;const R=e=>{const n=Date.now(),t=Math.floor(1e9*Math.random());return N++,e+"_"+t+N+String(n)},D=e=>null!==e&&("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase()),_=e=>void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" "),M=(e,n)=>{void 0!==e&&(null!=e.mode&&"object"==typeof e.mode&&"function"==typeof e.mode.set?e.mode.set(n):e.setMode(n))},L=(e,n,t)=>{var r,o;const i=e.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=n.id,i.src=n.src,i.async=null!==(r=n.async)&&void 0!==r&&r,i.defer=null!==(o=n.defer)&&void 0!==o&&o;const s=()=>{i.removeEventListener("load",s),i.removeEventListener("error",a),t(n.src)},a=e=>{i.removeEventListener("load",s),i.removeEventListener("error",a),t(n.src,e)};i.addEventListener("load",s),i.addEventListener("error",a),e.head&&e.head.appendChild(i)},V=(()=>{const e=[],n=n=>{let t=e.find((e=>e.getDocument()===n));return void 0===t&&(t=(e=>{let n={};const t=(e,t)=>{const r=n[e];r.done=!0,r.error=t;for(const n of r.handlers)n(e,t);r.handlers=[]};return{loadScripts:(r,o,i)=>{const s=e=>void 0!==i?i(e):console.error(e);if(0===r.length)return void s(new Error("At least one script must be provided"));let a=0,c=!1;const u=(e,n)=>{c||(n?(c=!0,s(n)):++a===r.length&&o())};for(const o of r){const r=n[o.src];if(r)r.done?u(o.src,r.error):r.handlers.push(u);else{const r=R("tiny-");n[o.src]={id:r,src:o.src,done:!1,error:null,handlers:[u]},L(e,Object.assign({id:r},o),t)}}},deleteScripts:()=>{var t;for(const r of Object.values(n)){const n=e.getElementById(r.id);null!=n&&"SCRIPT"===n.tagName&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n))}n={}},getDocument:()=>e}})(n),e.push(t)),t};return{loadList:(e,t,r,o,i)=>{const s=()=>n(e).loadScripts(t,o,i);r>0?setTimeout(s,r):s()},reinitialize:()=>{for(let n=e.pop();null!=n;n=e.pop())n.deleteScripts()}}})(),A=e=>{const n=e;return n&&n.tinymce?n.tinymce:null};class B extends e.Component{constructor(n){var t,r,o;super(n),this.rollbackTimer=void 0,this.valueCursor=void 0,this.rollbackChange=()=>{const e=this.editor,n=this.props.value;e&&n&&n!==this.currentContent&&e.undoManager.ignore((()=>{if(e.setContent(n),this.valueCursor&&(!this.inline||e.hasFocus()))try{e.selection.moveToBookmark(this.valueCursor)}catch(e){}})),this.rollbackTimer=void 0},this.handleBeforeInput=e=>{if(void 0!==this.props.value&&this.props.value===this.currentContent&&this.editor&&(!this.inline||this.editor.hasFocus()))try{this.valueCursor=this.editor.selection.getBookmark(3)}catch(e){}},this.handleBeforeInputSpecial=e=>{"Enter"!==e.key&&"Backspace"!==e.key&&"Delete"!==e.key||this.handleBeforeInput(e)},this.handleEditorChange=e=>{const n=this.editor;if(n&&n.initialized){const e=n.getContent();void 0!==this.props.value&&this.props.value!==e&&!1!==this.props.rollback&&(this.rollbackTimer||(this.rollbackTimer=window.setTimeout(this.rollbackChange,"number"==typeof this.props.rollback?this.props.rollback:200))),e!==this.currentContent&&(this.currentContent=e,T(this.props.onEditorChange)&&this.props.onEditorChange(e,n))}},this.handleEditorChangeSpecial=e=>{"Backspace"!==e.key&&"Delete"!==e.key||this.handleEditorChange(e)},this.initialise=(e=0)=>{var n,t,r;const o=this.elementRef.current;if(!o)return;if(!(e=>{if(!("isConnected"in Node.prototype)){let n=e,t=e.parentNode;for(;null!=t;)n=t,t=n.parentNode;return n===e.ownerDocument}return e.isConnected})(o)){if(0===e)setTimeout((()=>this.initialise(1)),1);else{if(!(e<100))throw new Error("tinymce can only be initialised when in a document");setTimeout((()=>this.initialise(e+1)),100)}return}const i=A(this.view);if(!i)throw new Error("tinymce should have been loaded into global scope");const s=Object.assign(Object.assign({},this.props.init),{selector:void 0,target:o,readonly:this.props.disabled,inline:this.inline,plugins:(a=null===(n=this.props.init)||void 0===n?void 0:n.plugins,c=this.props.plugins,_(a).concat(_(c))),toolbar:null!==(t=this.props.toolbar)&&void 0!==t?t:null===(r=this.props.init)||void 0===r?void 0:r.toolbar,setup:e=>{this.editor=e,this.bindHandlers({}),this.inline&&!D(o)&&e.once("PostRender",(n=>{e.setContent(this.getInitialValue(),{no_events:!0})})),this.props.init&&T(this.props.init.setup)&&this.props.init.setup(e)},init_instance_callback:e=>{var n,t;const r=this.getInitialValue();this.currentContent=null!==(n=this.currentContent)&&void 0!==n?n:e.getContent(),this.currentContent!==r&&(this.currentContent=r,e.setContent(r),e.undoManager.clear(),e.undoManager.add(),e.setDirty(!1));const o=null!==(t=this.props.disabled)&&void 0!==t&&t;M(this.editor,o?"readonly":"design"),this.props.init&&T(this.props.init.init_instance_callback)&&this.props.init.init_instance_callback(e)}});var a,c;this.inline||(o.style.visibility=""),D(o)&&(o.value=this.getInitialValue()),i.init(s)},this.id=this.props.id||R("tiny-react"),this.elementRef=e.createRef(),this.inline=null!==(o=null!==(t=this.props.inline)&&void 0!==t?t:null===(r=this.props.init)||void 0===r?void 0:r.inline)&&void 0!==o&&o,this.boundHandlers={}}get view(){var e,n;return null!==(n=null===(e=this.elementRef.current)||void 0===e?void 0:e.ownerDocument.defaultView)&&void 0!==n?n:window}componentDidUpdate(e){var n,t;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(e),this.editor.initialized)){if(this.currentContent=null!==(n=this.currentContent)&&void 0!==n?n:this.editor.getContent(),"string"==typeof this.props.initialValue&&this.props.initialValue!==e.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if("string"==typeof this.props.value&&this.props.value!==this.currentContent){const e=this.editor;e.undoManager.transact((()=>{let n;if(!this.inline||e.hasFocus())try{n=e.selection.getBookmark(3)}catch(e){}const t=this.valueCursor;if(e.setContent(this.props.value),!this.inline||e.hasFocus())for(const r of[n,t])if(r)try{e.selection.moveToBookmark(r),this.valueCursor=r;break}catch(e){}}))}if(this.props.disabled!==e.disabled){const e=null!==(t=this.props.disabled)&&void 0!==t&&t;M(this.editor,e?"readonly":"design")}}}componentDidMount(){var e,n,t,r,o;if(null!==A(this.view))this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&0===this.props.tinymceScriptSrc.length)null===(n=(e=this.props).onScriptsLoadError)||void 0===n||n.call(e,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(null===(t=this.elementRef.current)||void 0===t?void 0:t.ownerDocument){const e=()=>{var e,n;null===(n=(e=this.props).onScriptsLoad)||void 0===n||n.call(e),this.initialise()},n=e=>{var n,t;null===(t=(n=this.props).onScriptsLoadError)||void 0===t||t.call(n,e)};V.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),null!==(o=null===(r=this.props.scriptLoading)||void 0===r?void 0:r.delay)&&void 0!==o?o:0,e,n)}}componentWillUnmount(){const e=this.editor;e&&(e.off(this.changeEvents(),this.handleEditorChange),e.off(this.beforeInputEvent(),this.handleBeforeInput),e.off("keypress",this.handleEditorChangeSpecial),e.off("keydown",this.handleBeforeInputSpecial),e.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach((n=>{e.off(n,this.boundHandlers[n])})),this.boundHandlers={},e.remove(),this.editor=void 0)}render(){return this.inline?this.renderInline():this.renderIframe()}changeEvents(){var e,n,t;return(null===(t=null===(n=null===(e=A(this.view))||void 0===e?void 0:e.Env)||void 0===n?void 0:n.browser)||void 0===t?void 0:t.isIE())?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"}beforeInputEvent(){return window.InputEvent&&"function"==typeof InputEvent.prototype.getTargetRanges?"beforeinput SelectionChange":"SelectionChange"}renderInline(){const{tagName:n="div"}=this.props;return e.createElement(n,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})}renderIframe(){return e.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})}getScriptSources(){var e,n;const t=null===(e=this.props.scriptLoading)||void 0===e?void 0:e.async,r=null===(n=this.props.scriptLoading)||void 0===n?void 0:n.defer;if(void 0!==this.props.tinymceScriptSrc)return"string"==typeof this.props.tinymceScriptSrc?[{src:this.props.tinymceScriptSrc,async:t,defer:r}]:this.props.tinymceScriptSrc.map((e=>"string"==typeof e?{src:e,async:t,defer:r}:e));return[{src:"https://cdn.jsdelivr.net/npm/tinymce@7.2.1/tinymce.min.js",async:t,defer:r}]}getInitialValue(){return"string"==typeof this.props.initialValue?this.props.initialValue:"string"==typeof this.props.value?this.props.value:""}bindHandlers(e){if(void 0!==this.editor){$(this.editor,e,this.props,this.boundHandlers,(e=>this.props[e]));const n=e=>void 0!==e.onEditorChange||void 0!==e.value,t=n(e),r=n(this.props);!t&&r?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):t&&!r&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}}}B.propTypes=x,B.defaultProps={cloudChannel:"7"};export{B as Editor};
